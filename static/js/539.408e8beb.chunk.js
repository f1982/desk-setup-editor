"use strict";(self.webpackChunkdesk_setup_editor=self.webpackChunkdesk_setup_editor||[]).push([[539],{539:function(t,e,r){r.r(e),r.d(e,{STLExporter:function(){return i}});var o=r(671),n=r(144),a=r(674),i=function(){function t(){(0,o.Z)(this,t)}return(0,n.Z)(t,[{key:"parse",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=void 0!==r.binary&&r.binary,n=[],i=0;t.traverse((function(t){if(t.isMesh){var e=t.geometry;if(!0!==e.isBufferGeometry)throw new Error("THREE.STLExporter: Geometry is not of type THREE.BufferGeometry.");var r=e.index,o=e.getAttribute("position");i+=null!==r?r.count/3:o.count/3,n.push({object3d:t,geometry:e})}}));var s=80;if(!0===o){var u=2*i+3*i*4*4+80+4,f=new ArrayBuffer(u);(e=new DataView(f)).setUint32(s,i,!0),s+=4}else e="",e+="solid exported\n";for(var l=new a.Pa4,c=new a.Pa4,p=new a.Pa4,d=new a.Pa4,y=new a.Pa4,m=new a.Pa4,v=0,x=n.length;v<x;v++){var b=n[v].object3d,w=n[v].geometry,g=w.index,h=w.getAttribute("position");if(null!==g)for(var k=0;k<g.count;k+=3){var E=g.getX(k+0),T=g.getX(k+1),z=g.getX(k+2);M(E,T,z,h,b)}else for(var A=0;A<h.count;A+=3){var B=A+0,F=A+1,P=A+2;M(B,F,P,h,b)}}return!1===o&&(e+="endsolid exported\n"),e;function M(t,r,n,a,i){l.fromBufferAttribute(a,t),c.fromBufferAttribute(a,r),p.fromBufferAttribute(a,n),!0===i.isSkinnedMesh&&(i.boneTransform(t,l),i.boneTransform(r,c),i.boneTransform(n,p)),l.applyMatrix4(i.matrixWorld),c.applyMatrix4(i.matrixWorld),p.applyMatrix4(i.matrixWorld),_(l,c,p),G(l),G(c),G(p),!0===o?(e.setUint16(s,0,!0),s+=2):(e+="\t\tendloop\n",e+="\tendfacet\n")}function _(t,r,n){d.subVectors(n,r),y.subVectors(t,r),d.cross(y).normalize(),m.copy(d).normalize(),!0===o?(e.setFloat32(s,m.x,!0),s+=4,e.setFloat32(s,m.y,!0),s+=4,e.setFloat32(s,m.z,!0),s+=4):(e+="\tfacet normal "+m.x+" "+m.y+" "+m.z+"\n",e+="\t\touter loop\n")}function G(t){!0===o?(e.setFloat32(s,t.x,!0),s+=4,e.setFloat32(s,t.y,!0),s+=4,e.setFloat32(s,t.z,!0),s+=4):e+="\t\t\tvertex "+t.x+" "+t.y+" "+t.z+"\n"}}}]),t}()}}]);
//# sourceMappingURL=539.408e8beb.chunk.js.map